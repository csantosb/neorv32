This workflow

: https://github.com/stnolting/neorv32/actions/runs/11910086483/workflow

Get gcc

#+begin_src sh
  # wget https://github.com/xpack-dev-tools/riscv-none-elf-gcc-xpack/releases/download/v14.2.0-2/xpack-riscv-none-elf-gcc-14.2.0-2-linux-x64.tar.gz

  export PATH=$PATH:$PWD/riscv-gcc/bin/
#+end_src

Get ghdl

#+begin_src sh
  # wget2 https://github.com/ghdl/ghdl/releases/download/nightly/ghdl-gha-ubuntu-22.04-mcode.tgz
  export PATH=$PATH:$PWD/ghdl/bin/
#+end_src

Create a shell

#+begin_src sh
guix shell -C --link-profile --emulate-fhs make gcc-cross-i686-linux-gnu-toolchain coreutils
#+end_src

with

#+begin_src scheme
# https://git.elenq.tech/guix-packages/tree/cross.scm
# https://issues.guix.gnu.org/32087

(define-module (crosss)
 #:use-module (guix packages)
 #:use-module (guix gexp)
 #:use-module (gnu packages cross-base))

 (define-public gcc-cross-riscv64-linux-gnu-toolchain
  (cross-gcc-toolchain "riscv64-linux-gnu"))

 (define-public gcc-cross-i686-linux-gnu-toolchain
  (cross-gcc-toolchain "i686-linux-gnu"))
#+end_src

# guix package -i `guix build -s i686-linux gcc-toolchain`
# guix shell -C --link-profile --emulate-fhs make gcc-toolchain coreutils --with-c-toolchain=gcc-toolchain=`guix build -s i686-linux gcc-toolchain`

_Run:_

#+begin_src sh
  make RISCV_PREFIX=riscv-none-elf- -C sw/example/processor_check check
  make RISCV_PREFIX=riscv-none-elf- -C sw/example clean_all exe
  make RISCV_PREFIX=riscv-none-elf- -C sw/bootloader clean_all info bootloader
#+end_src

#+begin_src sh
  make -C sw/example/hello_world RISCV_PREFIX=riscv-none-elf- USER_FLAGS+="-DUART0_SIM_MODE -DUART1_SIM_MODE" clean_all info all sim-check
#+end_src
